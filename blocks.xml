<?xml version="1.0" encoding="UTF-8"?>
<blocks version="3.0">
  <!-- Main Application Container -->
  <block type="container" id="app_container">
    <properties>
      <width>100%</width>
      <height>100%</height>
      <background>cosmic_gradient</background>
      <overflow>hidden</overflow>
    </properties>

    <!-- Navigation Bar -->
    <block type="navigation" id="nav_bar">
      <properties>
        <position>fixed</position>
        <bottom>0</bottom>
        <width>100%</width>
        <height>80</height>
        <background>glass_morphism</background>
        <blur>20</blur>
        <border-radius>24 24 0 0</border-radius>
      </properties>
      
      <nav-items>
        <nav-item id="nav_main" icon="fas fa-home" label="Main" active="true"/>
        <nav-item id="nav_camera" icon="fas fa-camera" label="Camera"/>
        <nav-item id="nav_history" icon="fas fa-history" label="History"/>
        <nav-item id="nav_settings" icon="fas fa-cog" label="Settings"/>
      </nav-items>
    </block>

    <!-- Main Page -->
    <block type="page" id="main_page" active="true">
      <properties>
        <padding>24 20 100</padding>
        <background>transparent</background>
      </properties>

      <!-- Header -->
      <block type="header" id="main_header">
        <properties>
          <display>flex</display>
          <align-items>center</align-items>
          <justify-content>space-between</justify-content>
          <margin-bottom>32</margin-bottom>
        </properties>
        
        <block type="title" id="app_title">
          <text>PhotoMagic</text>
          <properties>
            <font-size>28</font-size>
            <font-weight>800</font-weight>
            <color>text_primary</color>
          </properties>
        </block>

        <block type="user_avatar" id="user_avatar">
          <properties>
            <width>40</width>
            <height>40</height>
            <border-radius>20</border-radius>
            <background>gradient_primary</background>
          </properties>
        </block>
      </block>

      <!-- Quick Actions -->
      <block type="grid" id="quick_actions">
        <properties>
          <columns>2</columns>
          <gap>16</gap>
          <margin-bottom>32</margin-bottom>
        </properties>

        <block type="action_card" id="take_photo">
          <properties>
            <background>glass_morphism</background>
            <border-radius>20</border-radius>
            <padding>24</padding>
            <transition>all 300ms ease</transition>
          </properties>
          <icon>fas fa-camera</icon>
          <title>Take Photo</title>
          <subtitle>Capture moments</subtitle>
          <action>navigate_to_camera</action>
        </block>

        <block type="action_card" id="view_gallery">
          <properties>
            <background>glass_morphism</background>
            <border-radius>20</border-radius>
            <padding>24</padding>
            <transition>all 300ms ease</transition>
          </properties>
          <icon>fas fa-images</icon>
          <title>Gallery</title>
          <subtitle>View photos</subtitle>
          <action>navigate_to_history</action>
        </block>

        <block type="action_card" id="ar_filters">
          <properties>
            <background>glass_morphism</background>
            <border-radius>20</border-radius>
            <padding>24</padding>
            <transition>all 300ms ease</transition>
          </properties>
          <icon>fas fa-magic</icon>
          <title>AR Filters</title>
          <subtitle>Apply effects</subtitle>
          <action>show_ar_filters</action>
        </block>

        <block type="action_card" id="settings">
          <properties>
            <background>glass_morphism</background>
            <border-radius>20</border-radius>
            <padding>24</padding>
            <transition>all 300ms ease</transition>
          </properties>
          <icon>fas fa-cog</icon>
          <title>Settings</title>
          <subtitle>Preferences</subtitle>
          <action>navigate_to_settings</action>
        </block>
      </block>

      <!-- Recent Photos -->
      <block type="section" id="recent_photos">
        <block type="section_header">
          <title>Recent Photos</title>
          <subtitle>Your latest captures</subtitle>
        </block>

        <block type="photo_grid" id="recent_grid">
          <properties>
            <columns>3</columns>
            <gap>12</gap>
            <aspect-ratio>1:1</aspect-ratio>
          </properties>
        </block>
      </block>
    </block>

    <!-- Camera Page -->
    <block type="page" id="camera_page">
      <properties>
        <background>transparent</background>
        <full-screen>true</full-screen>
      </properties>

      <!-- Camera Preview -->
      <block type="camera_preview" id="camera_preview">
        <properties>
          <width>100%</width>
          <height>100%</height>
          <object-fit>cover</object-fit>
        </properties>
      </block>

      <!-- Camera Controls -->
      <block type="camera_controls" id="camera_controls">
        <properties>
          <position>absolute</position>
          <bottom>120</bottom>
          <width>100%</width>
          <display>flex</display>
          <justify-content>center</justify-content>
          <align-items>center</align-items>
          <gap>24</gap>
        </properties>

        <block type="control_button" id="gallery_btn">
          <icon>fas fa-images</icon>
          <action>navigate_to_history</action>
        </block>

        <block type="capture_button" id="capture_btn">
          <properties>
            <width>80</width>
            <height>80</height>
            <border-radius>40</border-radius>
            <background>white</background>
            <border>4px solid rgba(255,255,255,0.3)</border>
          </properties>
          <action>capture_photo</action>
        </block>

        <block type="control_button" id="switch_camera_btn">
          <icon>fas fa-sync-alt</icon>
          <action>switch_camera</action>
        </block>
      </block>

      <!-- AR Filters Panel -->
      <block type="filters_panel" id="filters_panel">
        <properties>
          <position>absolute</position>
          <bottom>220</bottom>
          <width>100%</width>
          <height>100</height>
        </properties>

        <block type="filter_list" id="filter_list">
          <filter-item id="filter_none" name="None" preview="none.jpg" active="true"/>
          <filter-item id="filter_vintage" name="Vintage" preview="vintage.jpg"/>
          <filter-item id="filter_beauty" name="Beauty" preview="beauty.jpg"/>
          <filter-item id="filter_ar_cat" name="Cat Ears" preview="cat.jpg"/>
          <filter-item id="filter_ar_dog" name="Dog Face" preview="dog.jpg"/>
        </block>
      </block>
    </block>

    <!-- History Page -->
    <block type="page" id="history_page">
      <properties>
        <padding>24 20 100</padding>
      </properties>

      <!-- Header -->
      <block type="header" id="history_header">
        <properties>
          <display>flex</display>
          <align-items>center</align-items>
          <justify-content>space-between</justify-content>
          <margin-bottom>24</margin-bottom>
        </properties>
        
        <block type="back_button" id="back_btn">
          <icon>fas fa-arrow-left</icon>
          <action>navigate_to_main</action>
        </block>

        <block type="title">
          <text>History</text>
        </block>

        <block type="select_button" id="select_btn">
          <text>Select</text>
          <action>toggle_select_mode</action>
        </block>
      </block>

      <!-- Photo Organization -->
      <block type="photo_organization" id="photo_org">
        <properties>
          <background>glass_morphism</background>
          <border-radius>16</border-radius>
          <padding>16</padding>
          <margin-bottom>24</margin-bottom>
        </properties>

        <block type="org_header">
          <title>Photo Organization</title>
          <subtitle>Sort and organize your photos</subtitle>
        </block>

        <block type="sort_controls">
          <button id="sort_date" text="By Date" active="true"/>
          <button id="sort_category" text="By Category"/>
          <button id="sort_location" text="By Location"/>
        </block>
      </block>

      <!-- Photo List (Gmail Style) -->
      <block type="photo_list" id="photo_list">
        <properties>
          <style>gmail</style>
          <selectable>true</selectable>
        </properties>
      </block>
    </block>

    <!-- Settings Page -->
    <block type="page" id="settings_page">
      <properties>
        <padding>24 20 100</padding>
      </properties>

      <!-- Header -->
      <block type="header" id="settings_header">
        <block type="back_button" id="back_btn">
          <icon>fas fa-arrow-left</icon>
          <action>navigate_to_main</action>
        </block>
        <block type="title">
          <text>Settings</text>
        </block>
      </block>

      <!-- Settings Sections -->
      <block type="settings_section" id="camera_settings">
        <block type="section_header">
          <icon>fas fa-camera</icon>
          <title>Camera Settings</title>
        </block>

        <block type="settings_group">
          <setting-item type="select" id="photo_quality" title="Photo Quality" subtitle="Set image resolution">
            <options>
              <option value="high">High</option>
              <option value="medium">Medium</option>
              <option value="low">Low</option>
            </options>
          </setting-item>

          <setting-item type="switch" id="auto_save" title="Auto Save" subtitle="Save photos automatically" checked="true"/>

          <setting-item type="switch" id="location_tags" title="Location Tags" subtitle="Add GPS data to photos"/>
        </block>
      </block>

      <block type="settings_section" id="general_settings">
        <block type="section_header">
          <icon>fas fa-cog</icon>
          <title>General</title>
        </block>

        <block type="settings_group">
          <setting-item type="switch" id="dark_mode" title="Dark Mode" subtitle="Switch to dark theme"/>

          <setting-item type="select" id="language" title="Language" subtitle="Choose display language">
            <options>
              <option value="en">English</option>
              <option value="vi">Vietnamese</option>
              <option value="fr">French</option>
            </options>
          </setting-item>

          <setting-item type="action" id="clear_cache" title="Clear Cache" subtitle="Free up storage space" value="245 MB"/>
        </block>
      </block>

      <block type="settings_section" id="support_settings">
        <block type="section_header">
          <icon>fas fa-life-ring</icon>
          <title>Support</title>
        </block>

        <block type="settings_group">
          <setting-item type="action" id="feedback" title="Send Feedback" subtitle="Share your thoughts"/>
          <setting-item type="action" id="help" title="Help & FAQ" subtitle="Get help and answers"/>
          <setting-item type="info" id="version" title="Version" subtitle="App version info" value="2.1.4"/>
        </block>
      </block>

      <block type="settings_section" id="logout_section" style="logout">
        <block type="settings_group">
          <setting-item type="action" id="logout" title="Logout" subtitle="Sign out of your account" style="danger"/>
        </block>
      </block>
    </block>
  </block>

  <!-- Notifications -->
  <block type="notification_system" id="notifications">
    <properties>
      <position>fixed</position>
      <top>60</top>
      <right>20</right>
      <z-index>9999</z-index>
    </properties>
  </block>

  <!-- Modals -->
  <block type="modal_system" id="modals">
    <modal id="logout_confirm" type="confirmation">
      <title>Confirm Logout</title>
      <message>Are you sure you want to logout?</message>
      <actions>
        <action type="cancel" text="Cancel"/>
        <action type="confirm" text="Logout" style="danger"/>
      </actions>
    </modal>
  </block>
</blocks>